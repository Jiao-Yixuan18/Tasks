# 阶段七小总结

### 问题及解决方案

* 1.往一个文本文件进行写入操作时，写不进去

  ![3](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/3.png)

  ![4](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/4.png)

  * 原因

  ![29](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/29.png)

  

  * 解决方法：

    ![30](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/30.png)

  * 实操：

    * 方案一

    ![5](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/5.png)

    * 方案二

      ![6](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/6.png)

    * 方案三

      ![7](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/7.png)

* 2.为什么不用flush也能写入？

  * flush的原理

    ​	调用 `f.write()` 时，数据并不会直接写到硬盘里，而是先存在内存的 “缓冲区”（临时存储空间）里。只有当缓冲区被 “刷新”（flush）时，数据才会真正写入磁盘。

  * 不用 `flush()` 也能写入的核心原因

    Python 会在某些场景**自动触发 flush**，所以即使没手动调用 `flush()`，数据也能写入：

    * 1. 关闭文件时（`f.close()`）

    `f.close()` 执行时，Python 会先自动调用 `f.flush()`，把缓冲区里的所有数据写入磁盘，再关闭文件句柄。

    正常调用 `f.close()`，等同于隐式执行了 `flush()`。

    * 2. 使用 `with` 语句时

    `with` 块执行结束后，Python 会自动调用 `f.close()`，进而触发自动 flush，这也是 `with` 语句安全的核心原因。

    * 3. 缓冲区满了

    当写入的数据量超过缓冲区大小（通常是几 KB），Python 会自动刷新缓冲区，把数据写入磁盘。

    * 4. 程序正常退出时

    如果程序运行完后正常退出，Python 解释器会清理所有打开的文件句柄，过程中会自动 flush 并关闭文件。

* 3.为啥Hello Geek!被多次写入了

  ![10](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/10.png)

  * 原因

    在追加写入操作时，程序每运行一次，就会完成一次追加写入操作，在Hello Python!前加换行符之前，我运行了多次程序，自然追加写入了多次

  * 再运行两次程序验证

    * 第一次验证

    ![11](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/11.png)

    * 第二次验证

	![12](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/12.png)

* 4.为什么直接打印对象会得到内存地址？

  ![14](https://github.com/Jiao-Yixuan18/Tasks/blob/main/Phase7/Phase7-png/14.png)

  * 原因：

    在python里，数字、字符、列表、类实例等等，都是对象

    当我创建一个对象时，python会在计算机的内存里划出一块空间，专门存放这个对象的属性等数据；而这个对象的内存空间有一个唯一的内存地址，来唯一标识这个对象；如果没有定义这个对象如何展示（可用`__str__`等方法展示），它就展示内存地址


    上面的类对象就没有定义特殊的展示方法
